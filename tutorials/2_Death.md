Tutorial Two: Death
===================

In this tutorial we're going to make something happen to the simulants we created last time. We're going to make them die. We'll define a mortality rate and setup a new event listener than uses that rate to decide which simulants die during each time step.

Dynamic Rates
--------------
The next important `CEAM` concept we'll use is the dynamically calculated rates. Simulations are composed of many components which interact but may change from experiment to experiment so it's important that they be designed in such a way that they don't assume the presence of other components that are not absolutely necessary. Here's a concrete example. Say you're writing a simulation that models the effect of smoking on mortality. It's relatively simple to come up with a formula for that and include it in your mortality calculation. But what happens if in a future experiment you want to model BMI instead? Or both? To make those changes you'll need to modify the mortality calculation directly. `CEAM`'s dynamically calculated rates give us a way to model mortality (and similar rates) in such a way that models for things that effect mortality, like smoking and BMI, can be plugged in or unplugged transparently.

Dynamic rates in `CEAM` have globally unique names. So, mortality rate might be named 'mortality_rate' and any code that refers to that name is assumed to be referring to the same rate. Keep that in mind when naming rates. If you have an incidence rate, calling it 'incidence_rate' is likely to cause confusion since other components will have their own incidence rates. Better to use a more specific form like 'incidence_rate.heart_disease'. Each named rate has three important parts. The first is it's source which is a function that can calculate the base rate. For example 'mortality_rate' would need a source function that could calculate cause deleted mortality rates for each simulant. The second part are the mutators. These are any function that will change the rate from it's base form. An example would be a model of smoking that increases the mortality rate for simulants who are smokers. Components can add new mutators to a rate when they are added to the simulation. The third part is the rate consumers. These are any functions that use the final rate after any mutators have been applied to the base form. An example of a consumer is the code that uses the mortality rate to decide which simulants die. We'll create a named rate with a source and a consumer in this tutorial. The next tutorial will add a mutator.

###A note about rates and other types of dynamic values
> `CEAM` assumes that dynamic rates are yearly per capita rates unless specified otherwise. Rates are automatically scaled to the current time step size before they are returned to the consumer but mutators should assume that they are operating on the raw yearly rate. `CEAM`'s dynamic value system is very flexible and other types of values, like joint PAF (population attributable fraction) values for risks, are possible and will be discussed later.


